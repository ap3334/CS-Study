## DI (Dependency Injection) - 의존성 주입

- 사용자가 직접 하는 것이 아닌 **외부에서 객체간의 의존성을 주입해주는 방식**을 말한다.
- Spring에서는 Spring Container가 객체들의 의존 관계 연결을 자동으로 수행한다.
- 장점
    - 의존성이 줄어즘
    - 재사용성이 높은 코드가 됨
    - 테스트하기 좋음
    - 가독성이 높아짐

### 1. 필드 주입

```java
@Autowired
private B b;
```

- 사용하기 편함
- 단점
    - 불변성을 보장할 수 없음
    - 순환 참조가 발생할 수 있음

### 2. 수정자 주입

```java
@Autowired
public void setB(B b) {
	this.b = b;
}
```

- 선택적인 의존성을 사용할 수 있음
- 단점
    - NPE가 발생할 수 있음
    - 순환 참조 문제가 발생할 수 있음

### 3. 생성자 주입

```java
@Autowired
public A(B b) {
	this.b = b;
}
```

- 가장 권장되는 주입 방식
- 의존 관계를 모두 주입해야만 객체 생성이 가능하므로 **NPE를 방지할 수 있음**
- 불변성을 보장할 수 있음
- **순환참조를 컴파일 단계에서 찾아낼 수 있음**

### 4. 순환 참조

- 여러 빈들이 서로를 참조하고 있음
- A → B 참조, B → A 참조
- 서로 호출을 반복하면서 끊임없이 호출하다가 결국 StackOverFlowError를 발생시킴
- **필드 주입이나 생성자 주입은 객체 생성 후 비즈니스 로직 상에서 순환 참조가 일어나기 때문에 컴파일 단계에서 순환 참조를 잡아낼 수 없음**

## IoC (Inversion of Control) - 제어의 역전

- 객체의 생명주기 **제어 권한을 컨테이너가 사용자 대신 다루는 방식**
- 컨테이너가 직접 객체를 관리(제어권을 가짐)

### 1. IoC 컨테이너란?

- 스프링 애플리케이션에서는 객체 생성, 사용 등을 스프링 컨테이너가 제어하는데 이것을 IoC 컨테이너라고 함
- 장점
    - 객체를 스프링이 관리하므로 비즈니스 로직에 집중할 수 있음

## DI와 IoC의 차이는?

- DI는 **의존관계를 어떻게 가질 것인가**에 대한 문제
- IoC는 **누가 제어권을 가지고 있는가**에 대한 문제
- IoC 컨테이너가 빈을 생성할 때 빈들간의 의존관계를 DI를 통해 해결한다.
- DI는 IoC 사용을 필수로 요구하지 않음

## [참고 Link✓](https://steady-coding.tistory.com/600)
